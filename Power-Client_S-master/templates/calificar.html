<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static',filename='style.css')}}"> 
    <title>Hello, world!</title>
    <style>
      .zoom:hover {
        -ms-transform: scale(1.3); /* IE 9 */
        -webkit-transform: scale(1.3); /* Safari 3-8 */
        transform: scale(1.1); 
      }
      </style>
  </head>
  <body>
    <div><img src="static/miv.gif" style="position: absolute; width: 5%;height: 8%; border-radius: 100%; margin-top: 49%; margin-left: 14%;"></div>
      <div class="d-flex">
          <div id="sidebar-container" class="bg-primary">
              <div class="logo"><h4 class="text-light font-weight-bold mb-0">Servicio al cliente</h4></div>
              <div class="menu">
                  <a href="/mis_pedidos" class="d-block text-light p-3"><i class="icon ion-md-pricetags mr-2 lead"></i>Mis Pedidos</a>
                  <a href="/devoluciones_reembolsos" class="d-block text-light p-3"><i class="icon ion-md-cube mr-2 lead"></i>Devoluciones y Reembolsos</a>
                  <a href="#" class="d-block text-light p-3"><i class="icon ion-md-wallet mr-2 lead"></i>Mis Puntos</a>
                </div>
          </div>

          <div class="w-100">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-botton">
                <div class="container">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                    </button>
                    
              
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img src="static/{{nomre}}.png" class="img-fluid rounded-circle avatar mr-2">
                        {{nomre}}
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                          <a class="dropdown-item" href="/mi_perfil">Mi Perfil</a>
                          <a class="dropdown-item" href="/mis_pedidos">Mis Compras</a>
                          <div class="dropdown-divider"></div>
                          <a class="dropdown-item" href="/close">Cerrar sesión</a>
                        </div>
                        </li>
                    </ul>
                    </div>
                </div>
              </nav>

              <div id="content">
                  <section class="py-3">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-9">
                                <h1 class="font-weight-bold mb-0">Califica a nuestros asesores</h1>
                                <p class="lead text-muted">Tu respuesta nos ayuda a mejorar nuestro servicio</p>
                            </div>
                        </div>
                    </div>
                  </section>
                 
                  <section>
                    <div class="container">
                      <div class="card">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-lg-3 stat d-flex my-3">
                              <div class="mx-auto">
                                <h6 class="text-muted">Tickets Resueltos</h6>
                                <h2 class="font-weight-blod"> {{ttf}}</h2>
                              </div>
                            </div>
                            <div class="col-lg-3 stat d-flex my-3">
                              <div class="mx-auto">
                                <h6 class="text-muted">Tickets en curso</h6>
                                <h2 class="font-weight-blod"> {{tta}}</h2>
                              </div>
                            </div>
                            <div class="col-lg-3 d-flex my-3">
                              <div class="mx-auto">
                                <h6 class="text-muted">Tickets pendientes</h6>
                                <h2 class="font-weight-blod"> {{ttt}}</h2>
                              </div>
                            </div>
                            <div class="col-lg-3 d-flex">
                              <div class="mx-auto">
                                <img src="static/undraw_browsing_urt9.svg" style="width: 90px;">
                              </div>
                            </div>
                          </div>
  
                        </div>
  
                      </div>
                    </div>

                  </section>
                  

                  <section>
                    <div class="container py-5">
                      <table class="table table-hover">
                          <thead>
                            <tr>
                              <th scope="col">Clave de la llamada</th>
                              <th scope="col">Fecha de la llamada</th>
                              <th scope="col">Asesor</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for calificars in calificar %}
                            <tr>
                              <td>CALLT0{{calificars.0 }}</td>
                              <td>{{calificars.8 }}</td>
                              <td>{{calificars.9 }}</td>
                              <td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Calificar</button></td> 
                            </tr>
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <h5 class="modal-title" id="exampleModalLabel">Calificación de servicio</h5>
                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                      </button>
                                    </div>
                                    <div class="modal-body">
                                      <form>
                                        <div class="form-group">
                                          <label for="recipient-name" class="col-form-label">Califica a {{calificars.9 }} del 0 al 5:</label>
                                          <input type="text" value="{{calificars.0 }}">
                                          <div class="input-group mb-3">
                                            <select class="custom-select" id="inputGroupSelect01">
                                              <option selected>Choose...</option>
                                              <option value="0">0</option>
                                              <option value="1">1</option>
                                              <option value="2">2</option>
                                              <option value="3">3</option>
                                              <option value="4">4</option>
                                              <option value="5">5</option>
                                            </select>
                                          </div>
                                        </div>
                                      </form>
                                    </div>
                                    <div class="modal-footer">
                                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                      <button type="button" class="btn btn-primary">Calilficar</button>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            {% endfor %}
                          </tbody>
                        </table>
                    </div>
                  </section>
              </div>
          </div>

      </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script>
      function mostar()
      {
          document.getElementById("1").style.display="block";
      }
      function mostar()
      {
          document.getElementById("2").style.display="block";
      }
  </script>
  <script>
    var gl = c.getContext( 'webgl', { preserveDrawingBuffer: true } )
      ,	w = c.width = window.innerWidth
      ,	h = c.height = window.innerHeight
  
      ,	webgl = {}
      ,	opts = {
          projectileAlpha: .8,
          projectileLineWidth: 1.3,
          fireworkAngleSpan: .5,
          baseFireworkVel: 3,
          addedFireworkVel: 3,
          gravity: .03,
          lowVelBoundary: -.2,
          xFriction: .995,
          baseShardVel: 1,
          addedShardVel: .2,
          fireworks: 1000,
          baseShardsParFirework: 10,
          addedShardsParFirework: 10,
          shardFireworkVelMultiplier: .3,
          initHueMultiplier: 1/360,
          runHueAdder: .1/360
      }
  
  webgl.vertexShaderSource = `
  uniform int u_mode;
  uniform vec2 u_res;
  attribute vec4 a_data;
  varying vec4 v_color;
  
  vec3 h2rgb( float h ){
      return clamp( abs( mod( h * 6. + vec3( 0, 4, 2 ), 6. ) - 3. ) -1., 0., 1. );
  }
  void clear(){
      gl_Position = vec4( a_data.xy, 0, 1 );
      v_color = vec4( 0, 0, 0, a_data.w );
  }
  void draw(){
      gl_Position = vec4( vec2( 1, -1 ) * ( ( a_data.xy / u_res ) * 2. - 1. ), 0, 1 );
      v_color = vec4( h2rgb( a_data.z ), a_data.w );
  }
  void main(){
      if( u_mode == 0 )
          draw();
      else
          clear();
  }
  `;
  webgl.fragmentShaderSource = `
  precision mediump float;
  varying vec4 v_color;
  
  void main(){
      gl_FragColor = v_color;
  }
  `;
  
  webgl.vertexShader = gl.createShader( gl.VERTEX_SHADER );
  gl.shaderSource( webgl.vertexShader, webgl.vertexShaderSource );
  gl.compileShader( webgl.vertexShader );
  
  webgl.fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );
  gl.shaderSource( webgl.fragmentShader, webgl.fragmentShaderSource );
  gl.compileShader( webgl.fragmentShader );
  
  webgl.shaderProgram = gl.createProgram();
  gl.attachShader( webgl.shaderProgram, webgl.vertexShader );
  gl.attachShader( webgl.shaderProgram, webgl.fragmentShader );
  
  gl.linkProgram( webgl.shaderProgram );
  gl.useProgram( webgl.shaderProgram );
  
  webgl.dataAttribLoc = gl.getAttribLocation( webgl.shaderProgram, 'a_data' );
  webgl.dataBuffer = gl.createBuffer();
  
  gl.enableVertexAttribArray( webgl.dataAttribLoc );
  gl.bindBuffer( gl.ARRAY_BUFFER, webgl.dataBuffer );
  gl.vertexAttribPointer( webgl.dataAttribLoc, 4, gl.FLOAT, false, 0, 0 );
  
  webgl.resUniformLoc = gl.getUniformLocation( webgl.shaderProgram, 'u_res' );
  webgl.modeUniformLoc = gl.getUniformLocation( webgl.shaderProgram, 'u_mode' );
  
  gl.viewport( 0, 0, w, h );
  gl.uniform2f( webgl.resUniformLoc, w, h );
  
  gl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );
  gl.enable( gl.BLEND );
  
  gl.lineWidth( opts.projectileLineWidth );
  
  webgl.data = [];
  
  webgl.clear = function(){
      
      gl.uniform1i( webgl.modeUniformLoc, 1 );
      var a = .1;
      webgl.data = [
          -1, -1, 0, a,
           1, -1, 0, a,
          -1,  1, 0, a,
          -1,  1, 0, a,
           1, -1, 0, a,
           1,  1, 0, a
      ];
      webgl.draw( gl.TRIANGLES );
      gl.uniform1i( webgl.modeUniformLoc, 0 );
      webgl.data.length = 0;
  }
  webgl.draw = function( glType ){
      
      gl.bufferData( gl.ARRAY_BUFFER, new Float32Array( webgl.data ), gl.STATIC_DRAW );
      gl.drawArrays( glType, 0, webgl.data.length / 4 );
  }
  
  var	fireworks = []
      ,	tick = 0
      ,	sins = []
      ,	coss = []
      ,	maxShardsParFirework = opts.baseShardsParFirework + opts.addedShardsParFirework
      ,	tau = 6.283185307179586476925286766559;
  
  for( var i = 0; i < maxShardsParFirework; ++i ){
      sins[ i ] = Math.sin( tau * i / maxShardsParFirework );
      coss[ i ] = Math.cos( tau * i / maxShardsParFirework );
  }
  
  function Firework(){
      this.reset();
      this.shards = [];
      for( var i = 0; i < maxShardsParFirework; ++i )
          this.shards.push( new Shard( this ) );
  }
  Firework.prototype.reset = function(){
      
      var angle = -Math.PI / 2 + ( Math.random() - .5 )* opts.fireworkAngleSpan
          ,	vel = opts.baseFireworkVel + opts.addedFireworkVel * Math.random();
      
      this.mode = 0;
      this.vx = vel * Math.cos( angle );
      this.vy = vel * Math.sin( angle );
      
      this.x = Math.random() * w;
      this.y = h;
      
      this.hue = tick * opts.initHueMultiplier;
      
  }
  Firework.prototype.step = function(){
      
      if( this.mode === 0 ){
          
          var ph = this.hue
              ,	px = this.x
              ,	py = this.y;
          
          this.hue += opts.runHueAdder;
      
          this.x += this.vx *= opts.xFriction;
          this.y += this.vy += opts.gravity;
          
          webgl.data.push(
              px, py, ph, opts.projectileAlpha * .2,
              this.x, this.y, this.hue, opts.projectileAlpha * .2 );
          
          if( this.vy >= opts.lowVelBoundary ){
              this.mode = 1;
  
              this.shardAmount = opts.baseShardsParFirework + opts.addedShardsParFirework * Math.random() | 0;
  
              var baseAngle = Math.random() * tau
                  ,	x = Math.cos( baseAngle )
                  ,	y = Math.sin( baseAngle )
                  ,	sin = sins[ this.shardAmount ]
                  ,	cos = coss[ this.shardAmount ];
  
              for( var i = 0; i < this.shardAmount; ++i ){
  
                  var vel = opts.baseShardVel + opts.addedShardVel * Math.random();
                  this.shards[ i ].reset( x * vel, y * vel )
                  var X = x;
                  x = x * cos - y * sin;
                  y = y * cos + X * sin;
              }
          }
  
      } else if( this.mode === 1 ) {
          
          this.ph = this.hue
          this.hue += opts.runHueAdder;
          
          var allDead = true;
          for( var i = 0; i < this.shardAmount; ++i ){
              var shard = this.shards[ i ];
              if( !shard.dead ){
                  shard.step();
                  allDead = false;
              }
          }
          
          if( allDead )
              this.reset();
      }
      
  }
  function Shard( parent ){
      this.parent = parent;
  }
  Shard.prototype.reset = function( vx, vy ){
      this.x = this.parent.x;
      this.y = this.parent.y;
      this.vx = this.parent.vx * opts.shardFireworkVelMultiplier + vx;
      this.vy = this.parent.vy * opts.shardFireworkVelMultiplier + vy;
      this.starty = this.y;
      this.dead = false;
      this.tick = 1;
  }
  Shard.prototype.step = function(){
      
      this.tick += .05;
      
      var px = this.x
          ,	py = this.y;
      
      this.x += this.vx *= opts.xFriction;
      this.y += this.vy += opts.gravity;
      
      var proportion = 1 - ( this.y - this.starty ) / ( h - this.starty );
      
      webgl.data.push(
          px, py, this.parent.ph, opts.projectileAlpha / this.tick,
          this.x, this.y, this.parent.hue, opts.projectileAlpha / this.tick );
      
      if( this.y > h )
          this.dead = true;
  }
  
  function anim(){
      
      window.requestAnimationFrame( anim )
      
      webgl.clear();
      
      ++tick;
      
      if( fireworks.length < opts.fireworks )
          fireworks.push( new Firework );
      
      fireworks.map( function( firework ){ firework.step(); } );
      
      webgl.draw( gl.LINES );
  }
  anim();
  
  window.addEventListener( 'resize', function(){
      
      w = c.width = window.innerWidth;
      h = c.height = window.innerHeight;
      
      gl.viewport( 0, 0, w, h );
      gl.uniform2f( webgl.resUniformLoc, w, h );
  })
  window.addEventListener( 'click', function( e ){
      var firework = new Firework();
      firework.x = e.clientX;
      firework.y = e.clientY;
      firework.vx = 0;
      firework.vy = 0;
      fireworks.push( firework );
  });
  </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  </body>
</html>